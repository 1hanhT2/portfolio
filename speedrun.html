<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Speed-Run Timer • Bui Tan Thanh</title>
    <link rel="icon" type="image/svg+xml" href="./resources/favicon.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Montserrat:wght@700;800&display=swap" rel="stylesheet">
    <style>
        /* --- Base / tokens from main portfolio --- */
        :root {
            --bg: #0b0d12;
            --surface: #11161d;
            --surface-2: #0f141a;
            --text: #e5ecf5;
            --muted: #9fb0c3;
            --line: #263243;
            --accent: #7c5cff;
            --accent-2: #00d4ff;
            --ok: #3ae374;
            --warn: #f5a524;
            --danger: #ff5470;
            --radius: 16px;
            --shadow: 0 10px 30px rgba(0, 0, 0, .35), 0 4px 8px rgba(0, 0, 0, .25);
        }

        *, *::before, *::after { box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            margin: 0;
            font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
            color: var(--text);
            background: var(--bg);
            line-height: 1.6;
            letter-spacing: 0.2px;
            overflow-x: hidden;
        }
        h1, h2, h3 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
        }
        img { max-width: 100%; display: block; }
        a { color: inherit; text-decoration: none; }

        /* --- Background Effects --- */
        .bg-wrap {
            position: fixed; inset: 0; z-index: -2; pointer-events: none; overflow: hidden;
            background: radial-gradient(1200px 700px at 10% -10%, rgba(124, 92, 255, .35), transparent 60%), radial-gradient(900px 600px at 85% 20%, rgba(0, 212, 255, .25), transparent 60%), radial-gradient(900px 700px at 50% 110%, rgba(255, 84, 112, .18), transparent 60%);
            filter: saturate(110%);
        }
        .bg-wrap::before {
            content: ""; position: absolute; inset: 0;
            background-image: radial-gradient(1px 1px at 15px 25px, white, transparent), radial-gradient(1px 1px at 75px 95px, white, transparent), radial-gradient(1px 1px at 135px 165px, white, transparent), radial-gradient(1px 1px at 45px 125px, white, transparent), radial-gradient(1px 1px at 185px 55px, white, transparent);
            background-size: 200px 200px; opacity: 0.3;
        }
        .stars { position: absolute; inset: -10vh -10vw; background: transparent; }
        .stars::before, .stars::after { content: ""; position: absolute; inset: 0; background-repeat: repeat; background-size: 300px 300px; opacity: .35; }
        .stars::before { background-image: radial-gradient(1px 1px at 20px 30px, #bbd1ff 50%, transparent 51%), radial-gradient(1px 1px at 140px 180px, #9bc9ff 50%, transparent 51%), radial-gradient(1px 1px at 240px 80px, #d6e2ff 50%, transparent 51%); }
        .stars::after { background-image: radial-gradient(1px 1px at 70px 60px, #cde0ff 50%, transparent 51%), radial-gradient(1px 1px at 200px 200px, #c3d9ff 50%, transparent 51%); opacity: .2; }

        /* --- Layout & Nav --- */
        .shell { width: min(1160px, 92vw); margin-inline: auto; }
        .nav {
            position: sticky; top: 14px; z-index: 50; display: flex; align-items: center; justify-content: space-between;
            gap: 12px; padding: 10px 14px; border-radius: 999px; backdrop-filter: blur(10px);
            background: color-mix(in oklab, var(--surface) 88%, transparent); box-shadow: var(--shadow);
            border: 1px solid color-mix(in oklab, var(--line) 80%, transparent); margin-bottom: 40px;
        }
        .brand { display: flex; align-items: center; gap: 10px; font-weight: 700; }
        .brand-dots { display: inline-flex; gap: 4px; }
        .brand-dots span { width: 8px; height: 8px; border-radius: 999px; display: block; background: linear-gradient(135deg, var(--accent), var(--accent-2)); filter: drop-shadow(0 0 6px rgba(124, 92, 255, .6)); }
        .nav-links { display: flex; align-items: center; gap: 8px; }
        .nav a { padding: 8px 12px; border-radius: 10px; color: var(--muted); }
        .nav a:hover { color: var(--text); background: linear-gradient(135deg, rgba(124, 92, 255, .12), rgba(0, 212, 255, .12)); }
        
        /* --- Buttons & Cards --- */
        .btn {
            display: inline-flex; align-items: center; justify-content: center; gap: 8px; padding: 10px 14px;
            border-radius: 12px; font-weight: 600; border: 1px solid transparent;
            background: linear-gradient(var(--surface), var(--surface)) padding-box, linear-gradient(135deg, var(--accent), var(--accent-2)) border-box;
            color: var(--text);
            box-shadow: inset 0 -1px 0 rgba(255, 255, 255, .05), 0 6px 18px rgba(124, 92, 255, .25);
            transition: transform .2s ease, box-shadow .2s ease, background-color .2s ease;
        }
        .btn:hover { transform: translateY(-1px); box-shadow: inset 0 -1px 0 rgba(255, 255, 255, .06), 0 10px 26px rgba(124, 92, 255, .33); }
        .btn.secondary { background: linear-gradient(var(--surface), var(--surface)) padding-box, linear-gradient(135deg, #304055, #2b3240) border-box; }
        .btn:disabled { background: var(--surface-2); border-color: var(--line); color: var(--muted); cursor: not-allowed; box-shadow: none; transform: none; }
        .card {
            position: relative;
            background: linear-gradient(180deg, color-mix(in oklab, var(--surface) 92%, transparent), color-mix(in oklab, var(--surface-2) 92%, transparent));
            border: 1px solid var(--line); border-radius: var(--radius); padding: 24px; box-shadow: var(--shadow);
        }

        /* --- Speed-Run App Styles --- */
        .app-container {
            max-width: 650px;
            margin: 40px auto;
        }
        .app-container h1 {
            text-align: center;
            font-size: clamp(1.6rem, 2.6vw, 2rem);
            background: linear-gradient(90deg, var(--text), #c7d2fe 30%, #a5b4fc 60%);
            -webkit-background-clip: text; background-clip: text; color: transparent;
            margin-bottom: 24px;
        }
        #total-time {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--accent-2);
        }
        .timer-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 16px;
            background-color: var(--surface-2);
            border-radius: var(--radius);
        }
        .add-task-form {
            display: flex;
            margin-bottom: 20px;
        }
        input[type="text"] {
            flex-grow: 1;
            width: 100%;
            color: var(--text);
            background: var(--surface-2);
            border: 1px solid var(--line);
            border-radius: 12px 0 0 12px;
            padding: 10px 12px;
            outline: none;
            transition: border-color .2s ease, box-shadow .2s ease;
            font-family: inherit;
            font-size: inherit;
        }
        input[type="text"]:focus-visible {
            box-shadow: 0 0 0 2px color-mix(in oklab, var(--accent) 60%, transparent);
            border-color: color-mix(in oklab, var(--accent) 60%, var(--line));
        }
        .add-task-form .btn {
            border-radius: 0 12px 12px 0;
        }
        .task-list {
            display: grid;
            gap: 12px;
        }
        .task-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background-color: var(--surface);
            border: 1px solid var(--line);
            border-radius: 12px;
            transition: background-color .3s ease;
        }
        .task-item.completed {
            background-color: color-mix(in oklab, var(--ok) 15%, var(--surface));
            border-color: color-mix(in oklab, var(--ok) 25%, var(--line));
        }
        .task-item.completed .task-name {
            text-decoration: line-through;
            color: var(--muted);
        }
        .task-time {
            font-family: 'Montserrat', monospace;
            font-weight: 600;
            color: var(--accent);
        }

        /* --- Footer & Cursor --- */
        .footer { color: var(--muted); padding: 40px 0 70px; text-align: center; }
        .cursor-blob { position: fixed; top: 0; left: 0; width: 260px; height: 260px; border-radius: 50%; pointer-events: none; z-index: -1; background: radial-gradient(closest-side, rgba(124, 92, 255, .22), rgba(0, 212, 255, .12), transparent 60%); filter: blur(30px); transform: translate(-50%, -50%); mix-blend-mode: screen; opacity: .7; }
        @media (max-width: 900px), (pointer: coarse) { .cursor-blob { display: none; } }
    </style>
</head>
<body>
    <div class="bg-wrap" aria-hidden="true">
        <div class="stars"></div>
    </div>
    <div class="cursor-blob" id="blob" aria-hidden="true"></div>

    <main class="shell">
        <nav class="nav">
            <a class="brand" href="index.html">
                <span class="brand-dots"><span></span><span></span><span></span><span></span></span>
                <span>Bui Tan Thanh</span>
            </a>
            <div class="nav-links">
                <a href="index.html#journey">Journey</a>
                <a href="index.html#achievements">Achievements</a>
                <a href="index.html#features">Features</a>
                <a href="index.html">Back to Main</a>
                <a class="btn" href="index.html#contact">Get in touch</a>
            </div>
        </nav>

        <div class="app-container card">
            <h1>Speed-Run Tasks</h1>
            
            <div class="timer-bar">
                <span id="total-time">Total: 00:00.00</span>
                <button id="start-stop-button" class="btn">Start</button>
            </div>

            <div class="add-task-form">
                <input type="text" id="new-task-name" placeholder="Add a new task..." />
                <button id="add-task-button" class="btn secondary">Add</button>
            </div>

            <div id="task-list" class="task-list">
                <!-- Tasks will be rendered here by JavaScript -->
            </div>
        </div>

        <footer class="footer">© <span id="year"></span> Bui Tan Thanh</footer>
    </main>

    <script>
        // --- Year & Cursor Blob ---
        document.getElementById('year').textContent = new Date().getFullYear();
        const blobEl = document.getElementById('blob');
        let bx = window.innerWidth / 2, by = window.innerHeight / 2;
        window.addEventListener('pointermove', (e) => { bx = e.clientX; by = e.clientY; }, { passive: true });
        const tick = () => {
            const curX = parseFloat(blobEl.style.left || bx), curY = parseFloat(blobEl.style.top || by);
            blobEl.style.left = (curX + (bx - curX) * 0.12) + 'px';
            blobEl.style.top  = (curY + (by - curY) * 0.12) + 'px';
            requestAnimationFrame(tick);
        };
        tick();

        // --- Speed-Run App Logic ---
        let tasks = [];
        let isRunning = false;
        let startTime = null;
        let currentTime = 0;
        let intervalId = null;

        const newTaskNameInput = document.getElementById('new-task-name');
        const addTaskButton = document.getElementById('add-task-button');
        const startStopButton = document.getElementById('start-stop-button');
        const taskList = document.getElementById('task-list');
        const totalTimeDisplay = document.getElementById('total-time');

        function formatTime(time) {
            if (time === null) return '00:00.00';
            const ms = time % 1000;
            const totalSeconds = Math.floor(time / 1000);
            const seconds = totalSeconds % 60;
            const minutes = Math.floor(totalSeconds / 60);
            return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}.${Math.floor(ms / 10).toString().padStart(2, '0')}`;
        }

        function renderTasks() {
            taskList.innerHTML = '';
            tasks.forEach(task => {
                const taskElement = document.createElement('div');
                taskElement.className = `task-item ${task.completed ? 'completed' : ''}`;
                taskElement.innerHTML = `
                    <span class="task-name">${task.name}</span>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span class="task-time">${task.completed ? formatTime(task.splitTime) : '--:--.--'}</span>
                        ${!task.completed ? `
                            <button class="btn secondary complete-button" data-task-id="${task.id}" ${!isRunning ? 'disabled' : ''}>
                                Done
                            </button>
                        ` : ''}
                    </div>
                `;
                taskList.appendChild(taskElement);
            });

            document.querySelectorAll('.complete-button').forEach(button => {
                button.addEventListener('click', () => {
                    const taskId = button.dataset.taskId;
                    handleCompleteTask(taskId);
                });
            });
        }

        function handleAddTask() {
            const taskName = newTaskNameInput.value.trim();
            if (taskName) {
                tasks.push({
                    id: Date.now().toString(),
                    name: taskName,
                    completed: false,
                    splitTime: null,
                });
                newTaskNameInput.value = '';
                renderTasks();
            }
        }

        function handleStartStop() {
            if (!isRunning) {
                startTime = Date.now();
                currentTime = Date.now();
                intervalId = setInterval(() => {
                    currentTime = Date.now();
                    updateTotalTime();
                }, 10);
                startStopButton.textContent = 'Stop';
                startStopButton.classList.remove('secondary');
                startStopButton.style.background = 'linear-gradient(var(--surface), var(--surface)) padding-box, linear-gradient(135deg, var(--danger), #ff8a9e) border-box';
            } else {
                clearInterval(intervalId);
                intervalId = null;
                startStopButton.textContent = 'Start';
                startStopButton.classList.add('secondary');
                 startStopButton.style.background = '';
                updateTotalTime();
            }
            isRunning = !isRunning;
            renderTasks();
        }

        function handleCompleteTask(id) {
            const now = Date.now();
            tasks = tasks.map(task => {
                if (task.id === id) {
                    return { ...task, completed: true, splitTime: startTime ? now - startTime : 0 };
                }
                return task;
            });
            renderTasks();
        }

        function updateTotalTime() {
            const totalTime = isRunning ? currentTime - startTime : 0;
            totalTimeDisplay.textContent = `Total: ${formatTime(totalTime)}`;
        }

        addTaskButton.addEventListener('click', handleAddTask);
        newTaskNameInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') handleAddTask();
        });
        startStopButton.addEventListener('click', handleStartStop);

        renderTasks();
    </script>
</body>
</html>
